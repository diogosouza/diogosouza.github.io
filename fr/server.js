!function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=10)}([function(e,n){e.exports=require("winston")},function(e,n){e.exports=require("path")},function(e,n){e.exports=require("fs")},function(e,n){e.exports=require("express")},function(e,n){e.exports=require("multer")},function(e,n){e.exports=require("compression")},function(e,n){e.exports=require("node-input-validator")},function(e,n){e.exports=require("fs-extra")},function(e,n){e.exports=require("body-parser")},function(e,n){e.exports=require("nodemailer")},function(e,n,t){"use strict";t.r(n);var r=t(1),i=t.n(r),o=t(2),a=t.n(o),l=t(7),s=t.n(l),c=t(3),u=t.n(c),f=t(8),d=t.n(f),p=t(4),g=t.n(p),m=t(5),h=t.n(m),y=t(9),v=t.n(y),b=t(6),x=t.n(b),z=t(0),w=t.n(z);function H(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,n){if(!e)return;if("string"==typeof e)return S(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return S(e,n)}(e))){var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function S(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}x.a.extendMessages({required:"Le champ :attribute ne doit pas être vide.",email:"L'e-mail doit être une adresse e-mail valide.",minLength:"Le champ :attribute est trop court.",maxLength:"Le champ :attribute est trop long."},"en");var L=w.a.createLogger({transports:[new w.a.transports.File({filename:"error.log",level:"error"}),new w.a.transports.File({filename:"combined.log"})]});L.info("Hello again distributed logs");var N=v.a.createTransport({host:"nl1-ss14.a2hosting.com",port:465,secure:!0,auth:{user:"diogosouzac@davide.a2hosted.com",pass:"Win7runner@"},tls:{rejectUnauthorized:!1}}),q=u()(),A=__dirname,j=i.a.join(A,"index.html");q.use(u.a.static(A)),q.use(h()({filter:function(e,n){if(e.headers["x-no-compression"])return!1;return h.a.filter(e,n)}})),q.use(d.a.json());var O=g.a.diskStorage({destination:function(e,n,t){t(null,"./uploads")},filename:function(e,n,t){t(null,n.originalname)}}),_=g()({storage:O}).array("pieces-jointes");function k(e){var n=[].slice.call(arguments,1),t=0;return e.replace(/%s/g,(function(){return n[t++]}))}q.get("/",(function(e,n,t){compiler.outputFileSystem.readFile(j,(function(e,r){if(e)return t(e);n.set("content-type","text/html"),n.send(r),n.end()}))})),q.all("/contact",(function(e,n,t){n.sendFile(__dirname+"/contact.html")})),q.all("/a-propos",(function(e,n,t){n.sendFile(__dirname+"/about.html")})),q.all("/services",(function(e,n,t){n.sendFile(__dirname+"/services.html")})),q.post("/contact-me",(function(e,n){s.a.emptyDirSync("./uploads"),_(e,n,(function(t){if(t)return L.error(t),n.end(JSON.stringify({success:!1,message:"Désolé! Quelque chose a mal tourné. Veuillez réessayer ou nous contacter directement par email: davide@traducteur.it"}));var r=new b.Validator(e.body,{nom:"required|minLength:3|maxLength:250",message:"required|minLength:5|maxLength:5000",courriel:"required|email",telephone:"minLength:3|maxLength:20"});r.check().then((function(t){if(!t){var o="";for(var l in console.log(r.errors),r.errors)o+=r.errors[l].message+"<br>";return n.end(JSON.stringify({success:!1,message:o}))}var s=new Array;a.a.readdir(i.a.resolve("./uploads"),(function(t,r){t&&L.error("Could not list the directory.",t);var i,o=H(r);try{for(o.s();!(i=o.n()).done;){var l=i.value;if(a.a.statSync("./uploads/"+l).size/Math.pow(1024,2)>25)return n.end(JSON.stringify({success:!1,message:"La taille de fichier maximale autorisée est de 25 Mo."}));s.push({filename:l,path:"./uploads/"+l})}}catch(t){o.e(t)}finally{o.f()}N.sendMail({from:"diogosouzac@davide.a2hosted.com",to:"davidecavanna@hotmail.it",subject:"[Traducteur.it] Contact",html:k('<table\nborder="0"\ncellpadding="0"\ncellspacing="0"\nrole="presentation"\nwidth="100%"\nstyle="border-collapse:collapse"\n>\n<tbody>\n  <tr>\n    <td\n      align="left"\n      style="border-collapse:collapse;font-size:0px;padding:0;word-break:break-word"\n    >\n      <div\n        style="font-family:HelveticaNeue,Helvetica,Arial,sans-serif;font-size:13px;line-height:1;text-align:left;color:rgb(0,0,0)"\n      >\n        <span\n          style="font-size:16px;line-height:32px;color:rgb(71,71,71)"\n          >Nom:</span\n        >\n        <span\n          style="font-family:HelveticaNeue-Light,HelveticaNeue,Helvetica,Arial,sans-serif;font-size:16px;line-height:32px;color:rgb(71,71,71)"\n        >\n          %s</span\n        >\n      </div>\n    </td>\n  </tr>\n  <tr>\n    <td\n      align="left"\n      style="border-collapse:collapse;font-size:0px;padding:0;word-break:break-word"\n    >\n      <div\n        style="font-family:HelveticaNeue,Helvetica,Arial,sans-serif;font-size:13px;line-height:1;text-align:left;color:rgb(0,0,0)"\n      >\n        <span\n          style="font-size:16px;line-height:32px;color:rgb(71,71,71)"\n          >Courriel:</span\n        >\n        <span\n          style="font-family:HelveticaNeue-Light,HelveticaNeue,Helvetica,Arial,sans-serif;font-size:16px;line-height:32px;color:rgb(71,71,71)"\n        >\n          <a\n            href="mailto:madara.heidemane@gmail.com"\n            style="color:rgb(31,119,255)"\n            target="_blank"\n            >%s</a\n          ></span\n        >\n      </div>\n    </td>\n  </tr>\n  <tr>\n    <td\n      align="left"\n      style="border-collapse:collapse;font-size:0px;padding:0;word-break:break-word"\n    >\n      <div\n        style="font-family:HelveticaNeue,Helvetica,Arial,sans-serif;font-size:13px;line-height:1;text-align:left;color:rgb(0,0,0)"\n      >\n        <span\n          style="font-size:16px;line-height:32px;color:rgb(71,71,71)"\n          >Téléphone:</span\n        >\n        <span\n          style="font-family:HelveticaNeue-Light,HelveticaNeue,Helvetica,Arial,sans-serif;font-size:16px;line-height:32px;color:rgb(71,71,71)"\n        >\n          %s</span\n        >\n      </div>\n    </td>\n  </tr>\n  <tr>\n    <td\n      align="left"\n      style="border-collapse:collapse;font-size:0px;padding:0;word-break:break-word"\n    >\n      <div\n        style="font-family:HelveticaNeue,Helvetica,Arial,sans-serif;font-size:13px;line-height:1;text-align:left;color:rgb(0,0,0)"\n      >\n        <span\n          style="font-size:16px;line-height:32px;color:rgb(71,71,71)"\n          >Message:</span\n        >\n        <span\n          style="font-family:HelveticaNeue-Light,HelveticaNeue,Helvetica,Arial,sans-serif;font-size:16px;line-height:32px;color:rgb(71,71,71)"\n        >\n          %s</span\n        >\n      </div>\n    </td>\n  </tr>\n</tbody>\n</table>\n',e.body.nom,e.body.courriel,e.body.telephone,e.body.message),attachments:s},(function(e,t){if(L.info(t),e)return n.end(JSON.stringify({success:!1,message:"Désolé! Quelque chose a mal tourné. Veuillez réessayer ou nous contacter directement par email: davide@traducteur.it"})),L.error(e)})),n.end(JSON.stringify({success:!0,message:"Merci ! Je vous contacterai dans les plus brefs délais ! :)"}))}))}))}))}));var M=process.env.PORT||3e3;q.listen(M,(function(){console.log("App listening to ".concat(M,"....")),console.log("Press Ctrl+C to quit.")}))}]);