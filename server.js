!function(e){var n={};function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,n){if(1&n&&(e=t(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var i in e)t.d(r,i,function(n){return e[n]}.bind(null,i));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="/",t(t.s=10)}([function(e,n){e.exports=require("winston")},function(e,n){e.exports=require("path")},function(e,n){e.exports=require("fs")},function(e,n){e.exports=require("express")},function(e,n){e.exports=require("multer")},function(e,n){e.exports=require("compression")},function(e,n){e.exports=require("fs-extra")},function(e,n){e.exports=require("body-parser")},function(e,n){e.exports=require("nodemailer")},function(e,n){e.exports=require("node-input-validator")},function(e,n,t){"use strict";t.r(n);var r=t(1),i=t.n(r),o=t(2),a=t.n(o),l=t(6),s=t.n(l),c=t(3),u=t.n(c),f=t(7),d=t.n(f),p=t(4),g=t.n(p),m=t(5),y=t.n(m),h=t(8),v=t.n(h),b=t(9),x=t(0),w=t.n(x);function S(e){if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(e=function(e,n){if(!e)return;if("string"==typeof e)return z(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return z(e,n)}(e))){var n=0,t=function(){};return{s:t,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:t}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i,o=!0,a=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return o=e.done,e},e:function(e){a=!0,i=e},f:function(){try{o||null==r.return||r.return()}finally{if(a)throw i}}}}function z(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,r=new Array(n);t<n;t++)r[t]=e[t];return r}var H=w.a.createLogger({transports:[new w.a.transports.File({filename:"error.log",level:"error"}),new w.a.transports.File({filename:"combined.log"})]});H.info("Hello again distributed logs");var N=v.a.createTransport({host:"nl1-ss14.a2hosting.com",port:465,secure:!0,auth:{user:"diogosouzac@davide.a2hosted.com",pass:"Win7runner@"},tls:{rejectUnauthorized:!1}}),A=u()(),O=__dirname,_=i.a.join(O,"index.html");A.use(u.a.static(O)),A.use(y()({filter:function(e,n){if(e.headers["x-no-compression"])return!1;return y.a.filter(e,n)}})),A.use(d.a.json());var j=g.a.diskStorage({destination:function(e,n,t){t(null,"./uploads")},filename:function(e,n,t){t(null,n.originalname)}}),q=g()({storage:j}).array("attachments");function k(e){var n=[].slice.call(arguments,1),t=0;return e.replace(/%s/g,(function(){return n[t++]}))}A.get("/",(function(e,n,t){compiler.outputFileSystem.readFile(_,(function(e,r){if(e)return t(e);n.set("content-type","text/html"),n.send(r),n.end()}))})),A.all("/contact",(function(e,n,t){n.sendFile(__dirname+"/contact.html")})),A.all("/about",(function(e,n,t){n.sendFile(__dirname+"/about.html")})),A.all("/services",(function(e,n,t){n.sendFile(__dirname+"/services.html")})),A.post("/contact-me",(function(e,n){s.a.emptyDirSync("./uploads"),q(e,n,(function(t){if(t)return H.error(t),n.end(JSON.stringify({success:!1,message:"Sorry! Something went wrong. Please, try again or contact us directly via email: davide@translator.lu"}));var r=new b.Validator(e.body,{name:"required|minLength:3|maxLength:250",message:"required|minLength:5|maxLength:5000",email:"required|email",phone:"minLength:3|maxLength:20"});r.check().then((function(t){if(!t){var o="";for(var l in console.log(r.errors),r.errors)o+=r.errors[l].message+"<br>";return n.end(JSON.stringify({success:!1,message:o}))}var s=new Array;a.a.readdir(i.a.resolve("./uploads"),(function(t,r){t&&H.error("Could not list the directory.",t);var i,o=S(r);try{for(o.s();!(i=o.n()).done;){var l=i.value;if(a.a.statSync("./uploads/"+l).size/Math.pow(1024,2)>25)return n.end(JSON.stringify({success:!1,message:"The maximum allowed size for files is 25MB."}));s.push({filename:l,path:"./uploads/"+l})}}catch(t){o.e(t)}finally{o.f()}N.sendMail({from:"diogosouzac@davide.a2hosted.com",to:"davidecavanna@hotmail.it",subject:"[Translator.lu] Contact",html:k('<table\nborder="0"\ncellpadding="0"\ncellspacing="0"\nrole="presentation"\nwidth="100%"\nstyle="border-collapse:collapse"\n>\n<tbody>\n  <tr>\n    <td\n      align="left"\n      style="border-collapse:collapse;font-size:0px;padding:0;word-break:break-word"\n    >\n      <div\n        style="font-family:HelveticaNeue,Helvetica,Arial,sans-serif;font-size:13px;line-height:1;text-align:left;color:rgb(0,0,0)"\n      >\n        <span\n          style="font-size:16px;line-height:32px;color:rgb(71,71,71)"\n          >Name:</span\n        >\n        <span\n          style="font-family:HelveticaNeue-Light,HelveticaNeue,Helvetica,Arial,sans-serif;font-size:16px;line-height:32px;color:rgb(71,71,71)"\n        >\n          %s</span\n        >\n      </div>\n    </td>\n  </tr>\n  <tr>\n    <td\n      align="left"\n      style="border-collapse:collapse;font-size:0px;padding:0;word-break:break-word"\n    >\n      <div\n        style="font-family:HelveticaNeue,Helvetica,Arial,sans-serif;font-size:13px;line-height:1;text-align:left;color:rgb(0,0,0)"\n      >\n        <span\n          style="font-size:16px;line-height:32px;color:rgb(71,71,71)"\n          >E-mail:</span\n        >\n        <span\n          style="font-family:HelveticaNeue-Light,HelveticaNeue,Helvetica,Arial,sans-serif;font-size:16px;line-height:32px;color:rgb(71,71,71)"\n        >\n          <a\n            href="mailto:madara.heidemane@gmail.com"\n            style="color:rgb(31,119,255)"\n            target="_blank"\n            >%s</a\n          ></span\n        >\n      </div>\n    </td>\n  </tr>\n  <tr>\n    <td\n      align="left"\n      style="border-collapse:collapse;font-size:0px;padding:0;word-break:break-word"\n    >\n      <div\n        style="font-family:HelveticaNeue,Helvetica,Arial,sans-serif;font-size:13px;line-height:1;text-align:left;color:rgb(0,0,0)"\n      >\n        <span\n          style="font-size:16px;line-height:32px;color:rgb(71,71,71)"\n          >Phone:</span\n        >\n        <span\n          style="font-family:HelveticaNeue-Light,HelveticaNeue,Helvetica,Arial,sans-serif;font-size:16px;line-height:32px;color:rgb(71,71,71)"\n        >\n          %s</span\n        >\n      </div>\n    </td>\n  </tr>\n  <tr>\n    <td\n      align="left"\n      style="border-collapse:collapse;font-size:0px;padding:0;word-break:break-word"\n    >\n      <div\n        style="font-family:HelveticaNeue,Helvetica,Arial,sans-serif;font-size:13px;line-height:1;text-align:left;color:rgb(0,0,0)"\n      >\n        <span\n          style="font-size:16px;line-height:32px;color:rgb(71,71,71)"\n          >Message:</span\n        >\n        <span\n          style="font-family:HelveticaNeue-Light,HelveticaNeue,Helvetica,Arial,sans-serif;font-size:16px;line-height:32px;color:rgb(71,71,71)"\n        >\n          %s</span\n        >\n      </div>\n    </td>\n  </tr>\n</tbody>\n</table>\n',e.body.name,e.body.email,e.body.phone,e.body.message),attachments:s},(function(e,t){if(H.info(t),e)return n.end(JSON.stringify({success:!1,message:"Sorry! Something went wrong. Please, try again or contact us directly via email: davide@translator.lu"})),H.error(e)})),n.end(JSON.stringify({success:!0,message:"Thanks! We'll reach out as soon as possible! :)"}))}))}))}))}));var L=process.env.PORT||3e3;A.listen(L,(function(){console.log("App listening to ".concat(L,"....")),console.log("Press Ctrl+C to quit.")}))}]);